{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport axios from 'axios';\nimport { Card } from 'react-native-paper';\nimport { DEFAULT_HOST } from \"../host\";\nexport default function Prescription(_ref) {\n  var mbId = _ref.mbId;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    sData = _useState4[0],\n    setS = _useState4[1];\n  var getUser = function getUser() {\n    var value;\n    return _regeneratorRuntime.async(function getUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('token'));\n          case 3:\n            value = _context.sent;\n            if (!(value !== null)) {\n              _context.next = 9;\n              break;\n            }\n            setToken(value);\n            return _context.abrupt(\"return\", '');\n          case 9:\n            return _context.abrupt(\"return\", '');\n          case 10:\n            _context.next = 15;\n            break;\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", '');\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  };\n  getUser();\n  var config = {};\n  config.headers = {\n    Authorization: 'Bearer ' + token\n  };\n  var url = DEFAULT_HOST + \"/patient/search-prescription?field=prescription_medical_bill_id&value=\" + mbId;\n  useEffect(function () {\n    var f = function f() {\n      var result, _result;\n      return _regeneratorRuntime.async(function f$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(token !== '')) {\n                _context2.next = 14;\n                break;\n              }\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(axios.get(url, config));\n            case 4:\n              result = _context2.sent;\n              if (!result.data.success) {\n                _context2.next = 10;\n                break;\n              }\n              setS(result.data.data);\n              return _context2.abrupt(\"return\");\n            case 10:\n              console.log('failed');\n              return _context2.abrupt(\"return\");\n            case 12:\n              _context2.next = 25;\n              break;\n            case 14:\n              getUser();\n              _context2.next = 17;\n              return _regeneratorRuntime.awrap(axios.get(url, config));\n            case 17:\n              _result = _context2.sent;\n              if (!_result.data.success) {\n                _context2.next = 23;\n                break;\n              }\n              setS(_result.data.data);\n              return _context2.abrupt(\"return\");\n            case 23:\n              console.log('failed');\n              return _context2.abrupt(\"return\");\n            case 25:\n              _context2.next = 30;\n              break;\n            case 27:\n              _context2.prev = 27;\n              _context2.t0 = _context2[\"catch\"](0);\n              return _context2.abrupt(\"return\");\n            case 30:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 27]], Promise);\n    };\n    if (token !== '') {\n      f();\n    } else {\n      getUser();\n      f();\n    }\n    return;\n  }, [token]);\n  return React.createElement(View, null, sData.length !== 0 ? React.createElement(View, null, sData.map(function (element) {\n    return React.createElement(Card, {\n      key: element.prescription_id,\n      style: styles.view\n    }, React.createElement(Text, {\n      style: styles.text1\n    }, element.prescription_drug_name), React.createElement(Text, null, \" - S\\u1ED1 vi\\xEAn: \", element.drug_numbers), React.createElement(Text, null, \" - C\\xE1ch d\\xF9ng thu\\u1ED1c: \", element.prescription_doctor_instruction));\n  })) : React.createElement(View, null, React.createElement(Text, null, \"Kh\\xF4ng t\\xECm th\\u1EA5y \\u0111\\u01A1n thu\\u1ED1c!\")));\n}\nvar styles = StyleSheet.create({\n  text: {\n    fontSize: 18,\n    color: '#00bfff'\n  },\n  view: {\n    margin: 15,\n    padding: 5,\n    borderWidth: 1\n  },\n  text1: {\n    fontWeight: 'bold',\n    margin: 5\n  }\n});","map":{"version":3,"names":["AsyncStorage","React","useState","useEffect","View","Button","Text","Image","StyleSheet","ScrollView","ActivityIndicator","axios","Card","DEFAULT_HOST","Prescription","_ref","mbId","_useState","_useState2","_slicedToArray","token","setToken","_useState3","_useState4","sData","setS","getUser","value","_regeneratorRuntime","async","getUser$","_context","prev","next","awrap","getItem","sent","abrupt","t0","stop","Promise","config","headers","Authorization","url","f","result","_result","f$","_context2","get","data","success","console","log","createElement","length","map","element","key","prescription_id","style","styles","view","text1","prescription_drug_name","drug_numbers","prescription_doctor_instruction","create","text","fontSize","color","margin","padding","borderWidth","fontWeight"],"sources":["/home/khaibq/blockchain/mobile/components/Prescription.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState, useEffect } from 'react';\nimport { View, Button, Text, Image, StyleSheet, ScrollView, ActivityIndicator } from 'react-native';\nimport axios from 'axios';\nimport { Card } from 'react-native-paper';\nimport { DEFAULT_HOST } from '../host';\nexport default function Prescription({ mbId }) {\n  const [token, setToken] = useState('');\n  const [sData, setS] = useState([]);\n\n  const getUser = async () => {\n    try {\n      const value = await AsyncStorage.getItem('token');\n      if (value !== null) {\n        setToken(value);\n        return '';\n      } else return '';\n    } catch (e) {\n      return '';\n    }\n  };\n  getUser();\n  const config = {};\n  config.headers = {\n    Authorization: 'Bearer ' + token,\n  };\n  const url = `${DEFAULT_HOST}/patient/search-prescription?field=prescription_medical_bill_id&value=` + mbId;\n\n  useEffect(() => {\n    const f = async () => {\n      try {\n        if (token !== '') {\n          const result = await axios.get(url, config);\n          if (result.data.success) {\n            setS(result.data.data);\n            return;\n          } else {\n            console.log('failed');\n            return;\n          }\n        } else {\n          getUser();\n          const result = await axios.get(url, config);\n          if (result.data.success) {\n            setS(result.data.data);\n            return;\n          } else {\n            console.log('failed');\n            return;\n          }\n        }\n      } catch (error) {\n        // console.log(error)\n        return;\n      }\n    };\n\n    if (token !== '') {\n      f();\n    } else {\n      getUser();\n      f();\n    }\n    return;\n  }, [token]);\n\n  // style={{ flex: 1,justifyContent: 'flex-start', alignItems: 'center'}}\n  return (\n    <View>\n      {sData.length !== 0 ? (\n        <View>\n          {sData.map((element) => {\n            return (\n              <Card key={element.prescription_id} style={styles.view}>\n                <Text style={styles.text1}>{element.prescription_drug_name}</Text>\n                <Text> - Số viên: {element.drug_numbers}</Text>\n                <Text> - Cách dùng thuốc: {element.prescription_doctor_instruction}</Text>\n              </Card>\n            );\n          })}\n        </View>\n      ) : (\n        <View>\n          <Text>Không tìm thấy đơn thuốc!</Text>\n        </View>\n      )}\n    </View>\n  );\n}\nconst styles = StyleSheet.create({\n  text: {\n    fontSize: 18,\n    color: '#00bfff',\n  },\n  view: {\n    margin: 15,\n    padding: 5,\n    borderWidth: 1,\n  },\n  text1: {\n    fontWeight: 'bold',\n    margin: 5,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}