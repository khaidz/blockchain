{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { logout } from \"../helper/Auth\";\nimport moment from 'moment';\nimport axios from 'axios';\nimport { DEFAULT_HOST } from \"../host\";\nexport default function QR(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    profileData = _useState4[0],\n    setProfile = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    qr = _useState6[0],\n    setQR = _useState6[1];\n  var getUser = function getUser() {\n    var value, value1;\n    return _regeneratorRuntime.async(function getUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('token'));\n          case 3:\n            value = _context.sent;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('id'));\n          case 6:\n            value1 = _context.sent;\n            if (!(value !== null)) {\n              _context.next = 13;\n              break;\n            }\n            setToken(value);\n            setId(value1);\n            return _context.abrupt(\"return\", '');\n          case 13:\n            return _context.abrupt(\"return\", '');\n          case 14:\n            _context.next = 19;\n            break;\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", '');\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 16]], Promise);\n  };\n  getUser();\n  var config = {};\n  config.headers = {\n    Authorization: 'Bearer ' + token\n  };\n  var url = DEFAULT_HOST + \"/users/profile\";\n  useEffect(function () {\n    var f = function f() {\n      var result, _result;\n      return _regeneratorRuntime.async(function f$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(token !== '')) {\n                _context2.next = 15;\n                break;\n              }\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(axios.get(url, config));\n            case 4:\n              result = _context2.sent;\n              if (!result.data.success) {\n                _context2.next = 11;\n                break;\n              }\n              result.data.data.user.user_date_of_birth = moment(result.data.data.user.user_date_of_birth, 'DD-MM-YYYY');\n              setProfile(result.data.data.user);\n              setQR(result.data.data.qr);\n              _context2.next = 13;\n              break;\n            case 11:\n              console.log('failed');\n              return _context2.abrupt(\"return\");\n            case 13:\n              _context2.next = 27;\n              break;\n            case 15:\n              getUser();\n              _context2.next = 18;\n              return _regeneratorRuntime.awrap(axios.get(url, config));\n            case 18:\n              _result = _context2.sent;\n              if (!_result.data.success) {\n                _context2.next = 25;\n                break;\n              }\n              _result.data.data.user.user_date_of_birth = moment(_result.data.data.user.user_date_of_birth, 'DD-MM-YYYY');\n              setProfile(_result.data.data.user);\n              setQR(_result.data.data.qr);\n              _context2.next = 27;\n              break;\n            case 25:\n              console.log('failed');\n              return _context2.abrupt(\"return\");\n            case 27:\n              _context2.next = 32;\n              break;\n            case 29:\n              _context2.prev = 29;\n              _context2.t0 = _context2[\"catch\"](0);\n              return _context2.abrupt(\"return\");\n            case 32:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 29]], Promise);\n    };\n    f();\n    return;\n  }, [token]);\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/logo1.png\"),\n    style: styles.logo\n  }), React.createElement(Text, {\n    style: styles.text\n  }, \"Xin ch\\xE0o \", profileData.user_fullname, \"! \"), React.createElement(Text, {\n    style: styles.text1\n  }, \"* Cung c\\u1EA5p m\\xE3 QR sau khi \\u0111\\u01B0\\u1EE3c y\\xEAu c\\u1EA7u x\\xE1c th\\u1EF1c:\"), qr !== '' ? React.createElement(Image, {\n    source: {\n      uri: qr\n    },\n    style: styles.qr\n  }) : React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#00bfff\"\n  }));\n}\nvar styles = StyleSheet.create({\n  qr: {\n    width: 300,\n    height: 300,\n    marginTop: 20\n  },\n  logo: {\n    width: 60,\n    height: 60,\n    marginTop: 10\n  },\n  text: {\n    color: '#00bfff',\n    fontSize: 18\n  },\n  text1: {\n    color: 'red',\n    fontSize: 14\n  }\n});","map":{"version":3,"names":["AsyncStorage","React","useState","useEffect","View","Button","Text","Image","StyleSheet","ScrollView","ActivityIndicator","logout","moment","axios","DEFAULT_HOST","QR","_ref","navigation","_useState","_useState2","_slicedToArray","token","setToken","_useState3","_useState4","profileData","setProfile","_useState5","_useState6","qr","setQR","getUser","value","value1","_regeneratorRuntime","async","getUser$","_context","prev","next","awrap","getItem","sent","setId","abrupt","t0","stop","Promise","config","headers","Authorization","url","f","result","_result","f$","_context2","get","data","success","user","user_date_of_birth","console","log","createElement","style","flex","justifyContent","alignItems","source","require","styles","logo","text","user_fullname","text1","uri","size","color","create","width","height","marginTop","fontSize"],"sources":["/home/khaibq/blockchain/mobile/components/QR.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState, useEffect } from 'react';\nimport { View, Button, Text, Image, StyleSheet, ScrollView, ActivityIndicator } from 'react-native';\nimport { logout } from '../helper/Auth';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { DEFAULT_HOST } from '../host';\nexport default function QR({ navigation }) {\n  const [token, setToken] = useState('');\n  const [profileData, setProfile] = useState([]);\n  const [qr, setQR] = useState('');\n\n  const getUser = async () => {\n    try {\n      const value = await AsyncStorage.getItem('token');\n      const value1 = await AsyncStorage.getItem('id');\n      if (value !== null) {\n        setToken(value);\n        setId(value1);\n        return '';\n      } else return '';\n    } catch (e) {\n      return '';\n    }\n  };\n  getUser();\n\n  const config = {};\n  config.headers = {\n    Authorization: 'Bearer ' + token,\n  };\n  const url = `${DEFAULT_HOST}/users/profile`;\n\n  useEffect(() => {\n    const f = async () => {\n      try {\n        if (token !== '') {\n          const result = await axios.get(url, config);\n          if (result.data.success) {\n            result.data.data.user.user_date_of_birth = moment(result.data.data.user.user_date_of_birth, 'DD-MM-YYYY');\n            setProfile(result.data.data.user);\n            setQR(result.data.data.qr);\n            // setE(result.data.data.user.user_verified_email);\n          } else {\n            console.log('failed');\n            return;\n          }\n        } else {\n          getUser();\n          const result = await axios.get(url, config);\n          if (result.data.success) {\n            result.data.data.user.user_date_of_birth = moment(result.data.data.user.user_date_of_birth, 'DD-MM-YYYY');\n            setProfile(result.data.data.user);\n            setQR(result.data.data.qr);\n            // setE(result.data.data.user.user_verified_email);\n          } else {\n            console.log('failed');\n            return;\n          }\n        }\n      } catch (error) {\n        // console.log(error)\n        return;\n      }\n    };\n    f();\n    return;\n  }, [token]);\n  return (\n    //   <View style={{ flex: 1, justifyContent: 'space-evenly', alignItems: 'center' }}>\n    //\n    //     {/* <Button title=\"Đăng xuất\" onPress={Logout}></Button> */}\n    //     {/* */}\n    //   </View>, backgroundColor: \"#cccccc\"\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Image source={require('../assets/logo1.png')} style={styles.logo} />\n      <Text style={styles.text}>Xin chào {profileData.user_fullname}! </Text>\n      <Text style={styles.text1}>* Cung cấp mã QR sau khi được yêu cầu xác thực:</Text>\n      {qr !== '' ? (\n        <Image source={{ uri: qr }} style={styles.qr} />\n      ) : (\n        <ActivityIndicator size=\"small\" color=\"#00bfff\" />\n      )}\n    </View>\n  );\n}\nconst styles = StyleSheet.create({\n  qr: {\n    width: 300,\n    height: 300,\n    marginTop: 20,\n  },\n  logo: {\n    width: 60,\n    height: 60,\n    marginTop: 10,\n  },\n  text: {\n    color: '#00bfff',\n    fontSize: 18,\n  },\n  text1: {\n    color: 'red',\n    fontSize: 14,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}